---
title: Beautifully Rich Markdown Code Blocks
description: This is how I created the code blocks on my blog with MDX and prism-react-render.
tags:
  - gatsby
  - mdx
  - prism-react-renderer
  - markdown
  - code-blocks
author: Tyler Wray
banner: images/hero.jpg
bannerDescription: 3D Diamond
bannerCreditName: Shubham Dhage
bannerCreditUrl: https://unsplash.com/@theshubhamdhage
---

In my humble opinion, good code blocks are some of the most beautiful pieces of user interface on the web. When I think of a good dev blog or good dev docs; I think of beautiful, rich, elegant code blocks that show snippets of code in context with the post.

Done well, code blocks can really enhance the experience of reading development content. Some of my favorite code blocks are on sites like
[Gatsby](gatsbyjs.com/), [Stripe](https://stripe.com/docs/js), and [Josh W Comeau's Blog](https://www.joshwcomeau.com).

## Markdown Code Blocks

Even more beautiful to me are code blocks in markdown because you can take this basic syntax —

````markdown plain
```js
function hi() {
  console.log("hello");
}
```
````

— and transform it into this beautiful and feature rich code block for your readers!

```js
function hi() {
  console.log("hello");
}
```

This is what makes Markdown so powerful! Writing minimal syntax with intent; resulting in beautiful experiences.

## My Setup

I'm gunna show you how I was able to make these custom code blocks on my blog using [Gatsby](https://gatsbyjs.com/), [MDX](https://mdxjs.com/), [prism-react-renderer](https://github.com/FormidableLabs/prism-react-renderer), and [TailwindCSS](https://tailwindcss.com/).

> In this post I'm going to assume you know the basics of React. Things like rendering components, props, state, hooks.

Though I'm using this specific stack, the pieces can be adapted to use different various combonations of technologies such as —

- NextJS
- remark
- highlight.js
- Styled-components
- Vanilla CSS

> One modification I will make in this post is using Vanilla CSS for standard adaptability.

## Gatsby + MDX

MDX is the engine that translates plain markdown into awesome web markup. MDX is properly known for allowing a new flavor of markdown which you can render JSX within! Hence the name MD(X). We aren't going to be using that feature today. Instead we'll focus on the markdown rendering capabilites of MDX.

MDX transforms tripple backtick's (` ``` `) into `<pre />` tags on our webpage. So we're going to do some setup to prepare Gatsby and MDX for customization of the `<pre />` tags that MDX renders. We do that by rendering our own [`jsx__<MDXProvider />`](https://www.gatsbyjs.com/docs/how-to/routing/customizing-components/) component in Gatsby.

I like to do this by creating a few encapsulated components. First of which is `jsx__<MDXProvider />`

```jsx file=src/components/MDXProvider.js highlight={4,5}
import React from "react";
import { MDXProvider as BaseMDXProvider } from "@mdx-js/react";

// This is what we'll use later to customize our code blocks!
const components = {};

function MDXProvider({ children }) {
  return <BaseMDXProvider components={components}>{children}</BaseMDXProvider>;
}

export default MDXProvider;
```

Then we create `jsx__<RootWrapper />` to use `jsx__<MDXProvider />` —

```jsx file=src/components/RootWrapper.js highlight={5}
import React from "react";
import MDXProvider from "./MDXProvider";

function RootWrapper({ children }) {
  return <MDXProvider>{children}</MDXProvider>;
}

export default RootWrapper;
```

Finally, we need to modify `wrapRootElement` in both `gatsby-browser.js` and `gatsby-ssr.js` so that our entire app is wrapped with `jsx__<RootWrapper />` —

```jsx file=gatsby-browser.js,gatsby-ssr.js highlight={4-6}
import React from "react";
import RootWrapper from "./src/components/RootWrapper";

export const wrapRootElement = ({ element }) => (
  <RootWrapper>{element}</RootWrapper>
);
```

Now we are setup to deeply customize the `<pre />` tags rendered by MDX!

## PrismJS and prism-react-renderer

## Bonus - Inline Code Snippets
