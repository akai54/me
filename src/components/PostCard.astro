---
import { Picture } from "@astrojs/image/components";
import type { HTMLAttributes } from "astro/types";
import type { Tag } from "../schemas";
import Pill from "./Pill.astro";

interface Props extends HTMLAttributes<"a"> {
  image: {
    src: string;
    alt: string;
  };
  tags?: Tag[];
  title: string;
  description: string;
}

const { image, tags = [], title, description, ...rest } = Astro.props;
---

<a
  {...rest}
  class="grid group w-80 p-4 rounded-md hover:bg-zinc-200 dark:hover:bg-zinc-700/75 transition-colors"
>
  <div
    class="h-0 overflow-hidden pt-[56.25%] relative bg-zinc-800/25 rounded-md shadow-lg"
  >
    <Picture
      src={image.src}
      class="rounded-md overflow-hidden absolute top-0 left-0"
      alt={image.alt}
      aspectRatio="16:9"
      widths={[300]}
      loading="eager"
      sizes="300px"
      width={300}
      height={300}
    />
  </div>

  <div class="relative pt-4 pb-2 w-max">
    <h3 class="text-lg font-bold">
      {title}
    </h3>
    <span
      class="h-0.5 left-0 w-full block absolute scale-x-0 group-hover:scale-x-100 transition-transform ease-in origin-left group-hover:bg-black dark:group-hover:bg-white"
    ></span>
  </div>

  <p class="dark:text-zinc-300 font-normal pb-4">
    {description}
  </p>

  <div class="flex flex-wrap gap-1">
    {tags.map((tag) => <Pill tag={tag}>{tag}</Pill>)}
  </div>
</a>
