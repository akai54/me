---
import type { MarkdownLayoutProps } from "astro";
import BaseLayout from "./BaseLayout.astro";
import Image from "../components/Image.astro";
import type { Frontmatter } from "../frontmatter";

type Props = MarkdownLayoutProps<Frontmatter>;

const { frontmatter, url, rawContent } = Astro.props;

const estimatedReadingTime = Math.floor(rawContent().length / 700);
const books = "ðŸ“š".repeat(Math.floor(estimatedReadingTime / 3));
const publishDate = new Date(frontmatter.publishedOn).toLocaleDateString(
  "en-us",
  { year: "numeric", month: "long", day: "numeric" }
);
const fullUrl = `https://tylerwray.me${url}`;
const githubEditPath = `/src/pages${url}.md`;
---

<BaseLayout title={frontmatter.title}>
  <!-- <Seo
      description={frontmatter.description}
      image={frontmatter.banner?.publicURL}
      imageDescription={frontmatter.bannerDescription}
      keywords={frontmatter.tags}
      meta={[
        {
          property: "article:published_time",
          content: frontmatter.metaDate,
        },
        { property: "article:tag", content: frontmatter.tags },
        { property: "article:section", content: "Technology" },
      ]}
      path={fields.slug}
      title={frontmatter.title}
    /> -->
  <h1 class="pb-2">{frontmatter.title}</h1>
  <div class="pb-4">
    <span>{publishDate}</span>
    <span class="px-3">{` â€¢ `}</span>
    <span>
      {books}
      {estimatedReadingTime} min read
    </span>
    <span class="px-3">{` â€¢ `}</span>

    <a
      target="_blank"
      rel="noopener noreferrer"
      href={`https://twitter.com/intent/tweet?url=${encodeURIComponent(
        fullUrl
      )}`}
    >
      Tweet this post
    </a>
  </div>

  <Image src={frontmatter.image.src} alt={frontmatter.image.alt} />

  <div class="pt-1 pb-4 text-sm text-center text-gray-700 dark:text-gray-500">
    Photo By <a href={frontmatter.image.creditUrl}
      >{frontmatter.image.creditName}</a
    >
  </div>

  <div class="sr-only">
    <h2 class="inline-block">
      <a id="introduction" class="inline-block" href="#introduction">
        Introduction
      </a>
    </h2>
  </div>
  <slot />
  <div class="flex justify-between pt-8 pb-4">
    <a
      target="_blank"
      rel="noopener noreferrer"
      href={`https://mobile.twitter.com/search?q=${encodeURIComponent(
        "/TODO-blogPostUrl"
      )}`}
    >
      Discuss on Twitter
    </a>

    <div></div>

    <a
      class="flex gap-1 items-center"
      target="_blank"
      rel="noopener noreferrer"
      href={`https://github.com/tylerwray/me/edit/main${githubEditPath}`}
    >
      <!-- Heroicons: pencil -->
      <svg
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 24 24"
        fill="currentColor"
        class="w-4 h-4"
      >
        <path
          d="M21.731 2.269a2.625 2.625 0 00-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 000-3.712zM19.513 8.199l-3.712-3.712-12.15 12.15a5.25 5.25 0 00-1.32 2.214l-.8 2.685a.75.75 0 00.933.933l2.685-.8a5.25 5.25 0 002.214-1.32L19.513 8.2z"
        ></path>
      </svg>

      Edit post on GitHub
    </a>
  </div>
</BaseLayout>
